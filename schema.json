{
  "@context": ["http://www.w3.org/ns/csvw", {"@language": "en"}],
  "tables": [
    {
      "url": "https://ons-opendata.github.io/ref_migration/codelists/migration-directions.csv",
      "tableSchema": "https://ons-opendata.github.io/ref_common/codelist-schema.json"
    }, {
      "url": "https://ons-opendata.github.io/ref_migration/codelists/residence.csv",
      "tableSchema": "https://ons-opendata.github.io/ref_common/codelist-schema.json"
    }, {
      "url": "https://ons-opendata.github.io/ref_migration/codelists/ips-citizenship.csv",
      "tableSchema": "https://ons-opendata.github.io/ref_common/codelist-schema.json"
    }, {
      "url": "https://ons-opendata.github.io/ref_common/codelists/age-groups.csv",
      "tableSchema": "https://ons-opendata.github.io/ref_common/codelist-schema.json"
    }, {
      "url": "out/observations.csv",
      "tableSchema": {
        "columns": [{
          "titles": "Year",
          "name": "year",
          "datatype": {
            "format": "^[0-9]{4}$"
          },
          "required": true
        }, {
          "titles": "Country of Residence",
          "name": "residence",
          "required": true
        }, {
          "titles": "Migration Flow",
          "name": "flow",
          "required": true
        }, {
          "titles": "IPS Citizenship",
          "name": "citizenship",
          "required": true
        }, {
          "titles": "Sex",
          "name": "sex",
          "datatype": {
            "format": "^M$|^F$|^T$"
          },
          "required": true
        }, {
          "titles": "Age",
          "name": "age",
          "required": true
        }, {
          "titles": "Measure Type",
          "name": "measureType",
          "datatype": {
            "format": "Count"
          }
        }, {
          "titles": "Value",
          "name": "value",
          "datatype": "number",
          "required": true
        }, {
          "titles": "CI",
          "name": "ci",
          "datatype": "number"
        }, {
          "titles": "Unit",
          "name": "unit",
          "datatype": {
            "base": "string",
            "format": "people-thousands"
          },
          "required": true
        }],
        "foreignKeys": [{
          "columnReference": "flow",
          "reference": {
            "resource": "https://ons-opendata.github.io/ref_migration/codelists/migration-directions.csv",
            "columnReference": "notation"
          }
        }, {
          "columnReference": "residence",
          "reference": {
            "resource": "https://ons-opendata.github.io/ref_migration/codelists/residence.csv",
            "columnReference": "notation"
          }
        }, {
          "columnReference": "citizenship",
          "reference": {
            "resource": "https://ons-opendata.github.io/ref_migration/codelists/ips-citizenship.csv",
            "columnReference": "notation"
          }
        }, {
          "columnReference": "age",
          "reference": {
            "resource": "https://ons-opendata.github.io/ref_common/codelists/age-groups.csv",
            "columnReference": "notation"
          }
        }],
        "primaryKey": ["year", "residence", "flow", "citizenship", "sex", "age",
                       "value", "measureType", "unit"]
      }
    }
  ]
}
